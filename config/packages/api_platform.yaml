api_platform:
    title: "%env(APP_TITLE)%"
    version: "%env(APP_VERSION)%"
    show_webby: false
    mapping:
        paths:
            - "%kernel.project_dir%/src/Entity"
            - "%kernel.project_dir%/presentation/src"
    formats:
        json: ["application/json"]
    docs_formats:
        html: ["text/html"]
    error_formats:
        json: ["application/json"]
    defaults:
        stateless: true
        cache_headers:
            vary: ["Content-Type", "Authorization", "Origin"]
            etag: true
    http_cache: ~

when@dev:
    api_platform:
        http_cache:
            invalidation:
                enabled: true
                urls: ["%env(VARNISH_URL)%"]

when@prod:
    api_platform:
        http_cache:
            invalidation:
                enabled: true
                urls: ["%env(VARNISH_URL)%"]
